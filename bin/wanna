# -*- ruby -*-
require 'wanna'
require 'wanna/cmd/options'

builder = Wanna::TasklistBuilder.new
                  
options = Wanna::Cmd::Options.new(builder)
options.parse

builder.load_demands

if options.display_task_pattern
  builder.display_tasks_matching(options.display_task_pattern, STDOUT)
else
  ARGV.each do |target|
    builder.run_target(target)
  end
end